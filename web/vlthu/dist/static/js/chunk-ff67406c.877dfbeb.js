(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ff67406c"],{"07f0":function(t,e,a){"use strict";var n=a("fa33"),i=a.n(n);i.a},"24d2":function(t,e,a){"use strict";a.d(e,"e",(function(){return i})),a.d(e,"d",(function(){return s})),a.d(e,"a",(function(){return o})),a.d(e,"f",(function(){return r})),a.d(e,"b",(function(){return l})),a.d(e,"i",(function(){return c})),a.d(e,"h",(function(){return p})),a.d(e,"g",(function(){return u})),a.d(e,"c",(function(){return d}));var n=a("b775");function i(t){return Object(n["a"])({url:"/project/detail?id=".concat(t),method:"get"})}function s(t){return Object(n["a"])({url:"/check/ViewApplyInfo?project_id=".concat(t),method:"get"})}function o(t,e){return Object(n["a"])({url:"/check/CheckOp",method:"post",data:{apply_id:t,checked:e}})}function r(){return Object(n["a"])({url:"/my/allproject",method:"get"})}function l(t){return Object(n["a"])({url:"/worktime/Export?project_id=".concat(t),method:"get"})}function c(t){return Object(n["a"])({url:"/worktime/import",method:"post",data:t})}function p(t){return Object(n["a"])({url:"/sign/project",method:"post",data:t})}function u(t){return Object(n["a"])({method:"post",url:"/project/detail",data:t})}function d(t,e){return Object(n["a"])({method:"put",url:"/project/detail?id=".concat(t),data:{finished:!0}})}},2971:function(t,e,a){},"379e":function(t,e,a){},"707c":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{margin:"40px"}},[a("h1",[t._v(t._s(t.title))]),t._v(" "),t.ownername?a("el-card",{staticStyle:{"margin-bottom":"10px"}},[a("i",{staticClass:"el-icon-user-solid"},[t._v(" 发起人：")]),t._v(t._s(t.ownername)+"\n  ")]):t._e(),t._v(" "),a("el-card",{staticStyle:{"margin-bottom":"10px"}},["WH"==t.type?a("div",[a("i",{staticClass:"el-icon-school"},[t._v(" 项目类型：文化教育")])]):"SH"==t.type?a("div",[a("i",{staticClass:"el-icon-medal-1"},[t._v(" 项目类型：赛会服务")])]):"SQ"==t.type?a("div",[a("i",{staticClass:"el-icon-house"},[t._v(" 项目类型：社区服务")])]):"YL"==t.type?a("div",[a("i",{staticClass:"el-icon-first-aid-kit"},[t._v(" 项目类型：医疗卫生")])]):"JK"==t.type?a("div",[a("i",{staticClass:"el-icon-bangzhu"},[t._v(" 项目类型：健康残障")])]):"XY"==t.type?a("div",[a("i",{staticClass:"el-icon-guide"},[t._v(" 项目类型：校园讲解")])]):"QT"==t.type?a("div",[a("i",{staticClass:"el-icon-menu"},[t._v(" 项目类型：其他项目")])]):t._e()]),t._v(" "),t.content?a("el-card",{staticStyle:{"margin-bottom":"10px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[a("i",{staticClass:"el-icon-info"}),t._v(" 项目详情\n      ")])]),t._v("\n    "+t._s(t.content)+"\n  ")]):t._e(),t._v(" "),t.requirements?a("el-card",{staticStyle:{"margin-bottom":"10px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[a("i",{staticClass:"el-icon-star-off"}),t._v("\n        需求\n      ")])]),t._v("\n    "+t._s(t.requirements)+"\n  ")]):t._e(),t._v(" "),t.finished||t.started?t._e():a("el-card",{staticStyle:{"margin-bottom":"10px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[a("i",{staticClass:"el-icon-check"}),t._v("\n        报名审核\n      ")])]),t._v(" "),t.applyList&&0==t.applyList.length?a("p",[t._v("暂时还没有人报名QAQ")]):t._e(),t._v(" "),t.applyList&&t.applyList.length>0?a("checkform",{attrs:{applyList:t.applyList,form:JSON.parse(t.form)}}):t._e()],1),t._v(" "),!t.finished&&t.started?a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[a("i",{staticClass:"el-icon-close"},[t._v(" 结项操作")])])]),t._v(" "),!t.finished&&t.started?a("el-button",{attrs:{type:"danger",plain:""},on:{click:t.endProject}},[a("i",{staticClass:"el-icon-close"},[t._v(" 结束项目")])]):t._e()],1):t._e(),t._v(" "),t.started&&!t.finished?a("el-card",{staticStyle:{margin:"10px 0px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[a("i",{staticClass:"el-icon-tickets"}),t._v(" 签到列表\n      ")])]),t._v(" "),a("signlist",{attrs:{signlist:t.signList}})],1):t._e(),t._v(" "),t.started&&!t.finished?a("el-card",{staticStyle:{"Lmargin-bottom":"10px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[a("i",{staticClass:"el-icon-circle-plus-outline"}),t._v(" 发起签到\n      ")])]),t._v(" "),a("signform",{attrs:{jobs:t.jobs,projectID:t.projectID}})],1):t._e(),t._v(" "),t.finished?a("el-card",{staticStyle:{"margin-bottom":"10px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[a("i",{staticClass:"el-icon-setting"}),t._v(" 已经结项：查看/修改工时记录\n        "),a("el-upload",{staticStyle:{float:"right"},attrs:{action:"#","http-request":t.uploadExcel,"auto-upload":!0,multiple:!1,"show-file-list":!1,accept:".xls,.xlsx"}},[a("el-button",{attrs:{type:"primary"}},[a("i",{staticClass:"el-icon-upload"},[t._v(" 以Excel导入工时")])])],1),t._v(" "),a("el-button",{staticStyle:{float:"right",margin:"0px 10px"},on:{click:t.exportExcel}},[a("i",{staticClass:"el-icon-download"},[t._v(" 导出工时为excel")])])],1)]),t._v(" "),t.applyList&&0==t.applyList.length?a("p",[t._v("没有记录~")]):t._e(),t._v(" "),t.applyList&&0!=t.applyList.length?a("el-table",{attrs:{data:t.applyList}},[a("el-table-column",{attrs:{label:"参加人员",prop:"user.name"}}),t._v(" "),a("el-table-column",{attrs:{label:"岗位",prop:"job.job_name"}})],1):t._e()],1):t._e()],1)},i=[],s=(a("28a5"),a("24d2")),o=a("5c96"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"签到标题",prop:"title"}},[a("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"签到描述",prop:"content"}},[a("el-input",{model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"签到起止时间",prop:"time_range"}},[a("el-date-picker",{attrs:{type:"datetimerange","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00"]},model:{value:t.form.time_range,callback:function(e){t.$set(t.form,"time_range",e)},expression:"form.time_range"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"岗位安排",prop:"jobs"}},[a("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleJobsCheckAll},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")]),t._v(" "),a("el-checkbox-group",{model:{value:t.form.jobs,callback:function(e){t.$set(t.form,"jobs",e)},expression:"form.jobs"}},t._l(t.jobs,(function(e){return a("el-checkbox",{key:e.id,attrs:{label:e.id},on:{change:t.handleJobsCheck}},[t._v(t._s(e.job_name))])})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"签到地点",prop:"pos"}},[a("qqmap",{on:{input:t.handleMapInput}})],1),t._v(" "),a("el-button",{staticStyle:{margin:"10px 0px"},attrs:{type:"primary"},on:{click:t.startSign}},[t._v("发起签到")])],1)},l=[],c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"padd20"},[a("mapselect",{attrs:{mapcenter:t.centerLatLng,oldmarker:t.oldMarker},on:{mapclick:t.pointChange}})],1)},p=[],u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{overflow:"hidden"}},[a("section",[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入签到地点"},nativeOn:{keyup:function(e){return t.inputChange(e)}},model:{value:t.inputVal,callback:function(e){t.inputVal=e},expression:"inputVal"}})],1)],1)],1)],1)]),t._v(" "),t._m(0)])},d=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mapWrap"},[a("div",{staticClass:"qqmap",attrs:{id:"qqmapCont"}}),t._v(" "),a("div",{staticClass:"lngTips"})])}],m=a("7618"),f={props:{mapcenter:{type:String,default:"40.0024431613261,116.3263320"},oldmarker:{type:String,default:"40.0024431613261,116.3263320"},inputDefault:{type:String,default:""}},data:function(){return{qqmap:"",premarker:"",marker:"",inputVal:"",latlngCurrent:""}},mounted:function(){var t=this;this.inputVal=this.inputDefault,this.oldmarker&&(this.latlngCurrent=this.oldmarker||this.mapcenter),"object"==("undefined"===typeof qq?"undefined":Object(m["a"])(qq))?t.createMap():this.loadQQmap(),window.onMapFileLoad=function(){console.log("qqmap加载完成"),t.createMap()}},watch:{oldmarker:function(t,e){t&&(console.log(Object(m["a"])(t)),this.latlngCurrent=t,this.qqmap&&this.createMarker())},inputDefault:function(t,e){console.log("默认地址变成：",t),this.inputVal=t},inputVal:function(t,e){this.$emit("mapclick",{text:this.inputVal})}},methods:{loadQQmap:function(){var t=document.createElement("script");t.type="text/javascript",t.src="https://map.qq.com/api/js?v=2.exp&key=S3YBZ-GFP36-QGJSK-MEV46-I66IS-QQFRJ&callback=onMapFileLoad",document.body.appendChild(t)},search:function(){var t=this,e=new qq.maps.Geocoder({complete:function(e){t.qqmap.setCenter(e.detail.location),t.qqmap.setZoom(12)}}),a=this.inputVal;console.log("搜索地址：",a),e.getLocation(a)},inputChange:function(){this.$emit("addr",this.inputVal)},createMap:function(){var t=this,e=this;this.qqmap=new qq.maps.Map(document.getElementById("qqmapCont"),{center:new qq.maps.LatLng(e.mapcenter.split(",")[0],e.mapcenter.split(",")[1]),zoom:16}),setTimeout((function(){t.createMarker(),t.bindMapEvent()}),500)},createMarker:function(){var t=this;if(t.premarker&&t.premarker.setMap(null),this.oldmarker)console.log("编辑模式：",this.oldmarker),t.qqmap.setCenter(new qq.maps.LatLng(t.oldmarker.split(",")[0],t.oldmarker.split(",")[1])),t.premarker=new qq.maps.Marker({position:new qq.maps.LatLng(t.oldmarker.split(",")[0],t.oldmarker.split(",")[1]),map:t.qqmap});else{var e=new qq.maps.CityService({complete:function(e){t.qqmap.setCenter(e.detail.latLng)}});e.searchLocalCity()}},bindMapEvent:function(){var t=this;qq.maps.event.addListener(t.qqmap,"click",(function(e){t.marker&&t.marker.setMap(null),t.premarker&&t.premarker.setMap(null),t.$emit("mapclick",{pos:e.latLng,text:t.inputVal}),t.latlngCurrent=e.latLng.lat+","+e.latLng.lng,t.marker=new qq.maps.Marker({position:e.latLng,map:t.qqmap})}));var e=document.querySelector(".lngTips");window.getComputedStyle(document.querySelector(".mapWrap")).width;qq.maps.event.addListener(t.qqmap,"mousemove",(function(t){e.style.display="block",e.style.top=t.pixel.y+10+"px",e.style.left=t.pixel.x+15+"px",e.innerText="点击选择此坐标"})),qq.maps.event.addListener(t.qqmap,"mouseout",(function(t){e.style.display="none"}))}}},h=f,v=(a("c5d4"),a("2877")),b=Object(v["a"])(h,u,d,!1,null,null,null),g=b.exports,_={name:"qqmap",components:{mapselect:g},data:function(){return{pointName:"清华大学",qqmap:null,centerLatLng:"40.0024431613261,116.3263320",oldMarker:"40.0024431613261,116.3263320",newMarker:null}},methods:{pointChange:function(t){this.$emit("input",t)}}},y=_,j=(a("07f0"),Object(v["a"])(y,c,p,!1,null,null,null)),k=j.exports,q={name:"signform",props:["jobs","projectID"],components:{qqmap:k},created:function(){for(var t in this.alljobs=[],this.jobs)this.alljobs.push(this.jobs[t].id);console.log(this.alljobs)},data:function(){var t=function(t,e,a){e&&e.text?a():a(new Error("请在上方输入框填写活动地址"))};return{form:{title:void 0,content:void 0,time_range:void 0,jobs:[],pos:{pos:{lat:40.0024431613261,lng:116.326332},text:void 0}},alljobs:void 0,isIndeterminate:void 0,checkAll:void 0,rules:{title:{required:!0,message:"请输入签到标题",trigger:"blur"},content:{required:!0,message:"请输入签到描述",trigger:"blur"},time_range:{required:!0,message:"请输入起止时间",trigger:"blur"},jobs:{required:!0,message:"请至少安排一个岗位",trigger:"blur"},pos:{required:!0,validator:t,trigger:"blur"}}}},methods:{handleJobsCheck:function(t){var e=this.form.jobs.length;this.checkAll=e===this.jobs.length,this.isIndeterminate=e>0&&e<this.jobs.length},handleJobsCheckAll:function(t){this.form.jobs=t?this.alljobs:[],this.isIndeterminate=!1},startSign:function(){var t=this,e=this;this.$refs["form"].validate((function(a){if(a){var n={title:t.form.title,content:t.form.content,begin_time:new Date(t.form.time_range[0]).toISOString(),end_time:new Date(t.form.time_range[1]).toISOString(),jobs:t.form.jobs,project:t.projectID,longitude:t.form.pos.pos.lng,latitude:t.form.pos.pos.lat,position:t.form.pos.text};console.log(n),Object(s["h"])(n).then((function(t){Object(o["Message"])({message:"成功发起签到",type:"success",duration:3e3}),setTimeout((function(){e.$router.go(0)}),3e3)})).catch((function(t){Object(o["Message"])({message:"发起签到失败："+t,type:"error",duration:5e3})}))}}))},handleMapInput:function(t){this.form.pos.text=t.text,t.pos&&(this.form.pos.pos=t.pos),t.text&&this.$refs.form.clearValidate("pos"),console.log("收到了",this.form.pos)}}},x=q,w=Object(v["a"])(x,r,l,!1,null,null,null),L=w.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{visible:t.dialogVis,"with-header":!0,title:t.applyList[t.selectedForm].user.name+"的报名表单",width:"60%"},on:{"update:visible":function(e){t.dialogVis=e}}},[a("div",{staticStyle:{margin:"10px 60px"}},[a("el-form",{attrs:{"label-width":"auto"}},[a("el-form-item",{attrs:{label:"申请岗位"}},[a("el-input",{staticClass:"short",attrs:{value:t.applyList[t.selectedForm].job.job_name,disabled:!0}})],1),t._v(" "),t._l(t.form,(function(e,n){return a("el-form-item",{key:n,attrs:{label:e.text}},["text"==e.type?a("el-input",{staticClass:"short",attrs:{value:t.applyList[t.selectedForm].form[n],disabled:!0}}):"radioBox"==e.type?a("el-radio-group",{attrs:{value:parseInt(t.applyList[t.selectedForm].form[n]),disabled:!0}},t._l(t.form[n].options,(function(e,n){return a("el-radio",{key:n,attrs:{label:n}},[t._v("\n                "+t._s(e.name)+"\n              ")])})),1):a("el-checkbox-group",{attrs:{value:t.applyList[t.selectedForm].form[n],disabled:!0}},t._l(t.form[n].options,(function(e,n){return a("el-checkbox",{key:n,attrs:{label:""+n}},[t._v("\n                "+t._s(e.name)+"\n              ")])})),1)],1)}))],2)],1)]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.applyList,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{label:"姓名",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.user.name))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"岗位",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.job.job_name))]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"180",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{plain:""},on:{click:function(a){return t.showForm(e.row)}}},[t._v("\n          查看报名表单\n        ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"success",disabled:"P"==e.row.status},on:{click:function(a){return t.handleOne(!0,e.row.id)}}},["P"==e.row.status?a("i",{staticClass:"el-icon-check"},[t._v("  已通过  ")]):a("i",{staticClass:"el-icon-check"},[t._v("  通过  ")])])]}}])},[a("template",{slot:"header"},[a("el-button",{attrs:{type:"success",disabled:0==t.selected.length},on:{click:function(e){return t.handleAll(!0)}}},[t._v("\n          通过选中项\n        ")])],1)],2),t._v(" "),a("el-table-column",{attrs:{width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",disabled:"N"==e.row.status},on:{click:function(a){return t.handleOne(!1,e.row.id)}}},["N"==e.row.status?a("i",{staticClass:"el-icon-close"},[t._v("  已拒绝  ")]):a("i",{staticClass:"el-icon-close"},[t._v("  拒绝  ")])])]}}])},[a("template",{slot:"header"},[a("el-button",{attrs:{type:"danger",disabled:0==t.selected.length},on:{click:function(e){return t.handleAll(!1)}}},[t._v("\n          拒绝选中项\n        ")])],1)],2)],1)],1)},O=[],S={name:"checkform",props:["form","applyList"],created:function(){for(var t in console.log(this.applyList,this.form),this.isIndeterminate=!1,this.checkAll=!1,this.selected=[],this.applyList)this.applyList[t].form=JSON.parse(this.applyList[t].form)},data:function(){return{isIndeterminate:void 0,checkAll:void 0,selected:void 0,dialogVis:!1,selectedForm:0}},methods:{handleOne:function(t,e,a){var n=this;for(var i in console.log(t,e),this.selected)if(console.log(this.selected[i]),this.selected[i].id==e){if(console.log(this.selected[i].status,"状态"),"P"==this.selected[i].status&&1==t||"N"==this.selected[i].status&&0==t)return void(a||Object(o["Message"])({message:t?"已审核通过":"已拒绝请求",type:"success",duration:5e3}));break}Object(s["a"])(e,t).then((function(i){for(var s in a||Object(o["Message"])({message:t?"已审核通过":"已拒绝请求",type:"success",duration:5e3}),n.applyList)n.applyList[s].id==e&&(n.applyList[s].status=t?"P":"N")})).catch((function(t){a||Object(o["Message"])({message:t,type:"error",duration:5e3})}))},handleSelectionChange:function(t){console.log(t),this.selected=t},handleAll:function(t){var e=!1;for(var a in this.selected){var n=this.selected[a].id;this.handleOne(t,n,e),e=!0}},showForm:function(t){var e=this.applyList.indexOf(t);console.log(e),this.selectedForm=e,this.dialogVis=!0},getNChoice:function(t,e){JSON.parse(this.applyList[t].form)[e];return 666},get1Choice:function(t,e){var a=JSON.parse(this.applyList[t].form)[e];return this.form[e].options[a]}}},M=S,I=(a("cddb"),Object(v["a"])(M,C,O,!1,null,null,null)),E=I.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{attrs:{data:t.signlist}},[a("el-table-column",{attrs:{label:"签到标题",prop:"title"}}),t._v(" "),a("el-table-column",{attrs:{label:"签到位置",prop:"position"}}),t._v(" "),a("el-table-column",{attrs:{label:"开始时间",prop:"b_time"}}),t._v(" "),a("el-table-column",{attrs:{label:"结束时间",prop:"e_time"}})],1)],1)},D=[],V={name:"signlist",props:["signlist"],data:function(){return{}},created:function(){for(var t in console.log("签到列表：",this.signlist),this.signlist)this.signlist[t].b_time=new Date(this.signlist[t].begin_time).toLocaleString(),this.signlist[t].e_time=new Date(this.signlist[t].end_time).toLocaleString()},methods:{}},A=V,F=Object(v["a"])(A,$,D,!1,null,null,null),J=F.exports,P={name:"Project",components:{signform:L,checkform:E,signlist:J},data:function(){return{ownername:void 0,projectID:void 0,title:void 0,content:void 0,cover:void 0,require_num:void 0,status:void 0,requirements:void 0,form:void 0,time:void 0,deadline:void 0,applyList:void 0,finished:void 0,started:void 0,jobs:void 0,type:void 0,signList:void 0}},methods:{handleRecord:function(t){var e=t.target.id.substr(1,t.target.id.length),a=t.target.id.substr(0,1),n=this;if("A"!=e)Object(s["a"])(parseInt(e),"Y"==a).then((function(t){for(var i in Object(o["Message"])({message:"Y"==a?"已审核通过":"已审核拒绝",type:"success",duration:5e3}),n.applyList)if(n.applyList[i].id==parseInt(e)){n.applyList[i].status="Y"==a?"P":"N";break}})).catch((function(t){Object(o["Message"])({message:"获取错误Error request"+t,type:"error",duration:5e3})}));else for(var i in n.applyList)n.applyList.selected&&Object(s["a"])(parseInt(e),"Y"==a).catch((function(t){Object(o["Message"])({message:"获取错误Error request"+t,type:"error",duration:5e3})}))},exportExcel:function(){Object(s["b"])(this.projectID).then((function(t){var e=window.URL.createObjectURL(new Blob([t.data])),a=document.createElement("a");a.href=e;var n=t.headers["content-disposition"].split("filename=");a.setAttribute("download",n[1]),document.body.appendChild(a),a.click()})).catch((function(t){Object(o["Message"])({message:"Error request"+t,type:"error",duration:5e3})}))},endProject:function(){var t=this,e=this;this.$confirm("此操作不可逆转，是否结项？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["c"])(t.projectID).then((function(t){Object(o["Message"])({message:"已成功结项",type:"success",duration:3e3}),setTimeout((function(){e.$router.go(0)}),3e3)}))})).catch((function(){}))},uploadExcel:function(t){var e=new FormData;e.append("project_id",this.projectID),e.append("import_file",t.file),Object(s["i"])(e).then((function(t){Object(o["Message"])({message:"成功上传",type:"success",duration:5e3})})).catch((function(t){Object(o["Message"])({message:"Error: ",err:t,type:"error",duration:5e3})}))}},created:function(){var t=this;console.log("project页面加载完毕,route为",this.$route),this.$data.projectID=this.$route.query.projectID;var e=this;Object(s["e"])(this.projectID).then((function(a){console.log("项目详情",a),t.ownername=a.data.webuser,e.title=a.data.title,e.content=a.data.content,e.cover=a.data.cover,e.require_num=a.data.require_num,e.status=a.data.status,e.requirements=a.data.requirements,e.form=a.data.form,e.time=a.data.time,e.deadline=a.data.deadline,e.finished=a.data.finished,e.jobs=a.data.job_set,e.type=a.data.type,e.signList=a.data.signproject_set;var n=new Date(a.data.deadline).getTime(),i=(new Date).getTime();e.started=!(n>i),Object(s["d"])(t.projectID).then((function(t){console.log("报名信息：",t.data),e.applyList=t.data})).catch((function(t){Object(o["Message"])({message:"获取错误Error request"+t,type:"error",duration:5e3})}))})).catch((function(t){Object(o["Message"])({message:t,type:"error",duration:5e3})}))}},N=P,Q=(a("88b8"),Object(v["a"])(N,n,i,!1,null,"0a7c18ea",null));e["default"]=Q.exports},"88b8":function(t,e,a){"use strict";var n=a("379e"),i=a.n(n);i.a},b5b7:function(t,e,a){},b775:function(t,e,a){"use strict";var n=a("bc3a"),i=a.n(n),s=(a("5c96"),i.a.create({baseURL:"/api",timeout:5e3}));s.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),s.interceptors.response.use((function(t){return 200!==t.status?Promise.reject(new Error(t.data||"Error")):t}),(function(t){return Promise.reject(t)})),e["a"]=s},c5d4:function(t,e,a){"use strict";var n=a("2971"),i=a.n(n);i.a},cddb:function(t,e,a){"use strict";var n=a("b5b7"),i=a.n(n);i.a},fa33:function(t,e,a){}}]);