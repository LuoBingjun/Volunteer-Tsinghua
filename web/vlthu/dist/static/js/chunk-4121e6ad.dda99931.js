(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4121e6ad"],{"0cd6":function(e,t,r){},"555a":function(e,t,r){"use strict";var s=r("9fe9"),n=r.n(s);n.a},"6ba3":function(e,t,r){"use strict";var s=r("f31c"),n=r.n(s);n.a},"8a84":function(e,t,r){"use strict";var s=r("0cd6"),n=r.n(s);n.a},"9fe9":function(e,t,r){},b775:function(e,t,r){"use strict";var s=r("bc3a"),n=r.n(s),o=(r("5c96"),n.a.create({baseURL:"/api",timeout:5e3}));o.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),o.interceptors.response.use((function(e){return 200!==e.status?Promise.reject(new Error(e.data||"Error")):e}),(function(e){return Promise.reject(e)})),t["a"]=o},c24f:function(e,t,r){"use strict";r.d(t,"f",(function(){return i})),r.d(t,"c",(function(){return u})),r.d(t,"g",(function(){return c})),r.d(t,"d",(function(){return l})),r.d(t,"b",(function(){return m})),r.d(t,"a",(function(){return f})),r.d(t,"h",(function(){return d})),r.d(t,"e",(function(){return p}));var s=r("b775"),n=r("a78e"),o=r.n(n),a="isSuperUser";function i(e){return console.log(e),Object(s["a"])({url:"/auth/weblogin",method:"post",data:e})}function u(e){return void 0!==e?Object(s["a"])({url:"/auth/webuser?id=".concat(e),method:"get"}):Object(s["a"])({url:"/auth/webuser",method:"get"})}function c(e,t){return void 0!==t?Object(s["a"])({url:"/auth/webuser?id=".concat(t),method:"put",data:e}):(console.log(e),Object(s["a"])({url:"/auth/webuser",method:"put",data:e}))}function l(){return Object(s["a"])({url:"/auth/listwebuser",method:"get"})}function m(e){return Object(s["a"])({url:"/auth/webuser?id=".concat(e),method:"delete"})}function f(e){return Object(s["a"])({url:"/auth/webuser",method:"post",data:e})}function d(e){o.a.set(a,e)}function p(){return"false"!=o.a.get(a)}},e37e:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.superUser?r("superuser"):r("user")],1)},n=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-card",[r("h1",[r("i",{staticClass:"el-icon-user"}),e._v(" "+e._s(e.oldname)+"的团体信息\n    ")]),e._v(" "),r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"auto"}},[r("el-form-item",{attrs:{label:"团体名称",prop:"name"}},[r("el-input",{staticClass:"short",model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"团体描述",prop:"description"}},[r("el-input",{staticClass:"short",model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"电子邮箱",prop:"email"}},[r("el-input",{staticClass:"short",model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"电话号码",prop:"phone"}},[r("el-input",{staticClass:"short",model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.updateInfo}},[r("i",{staticClass:"el-icon-upload"},[e._v(" 更新")])]),e._v(" "),r("el-button",{attrs:{type:"danger",plain:""},on:{click:e.resetInfo}},[r("i",{staticClass:"el-icon-close"},[e._v(" 重置")])])],1)],1)},a=[],i=(r("7f7f"),r("c24f")),u=r("5c96"),c={name:"user",data:function(){var e=function(e,t,r){r()},t=function(e,t,r){r()};return{oldname:void 0,form:{name:void 0,description:void 0,manager:void 0,email:void 0,phone:void 0},rules:{email:[{validator:e,message:"邮箱不符合格式",trigger:"blur"}],phone:[{validator:t,message:"手机号不符合格式",trigger:"blur"}]}}},methods:{updateInfo:function(){var e=this;this.$refs.form.validate().then((function(t){t&&Object(i["g"])(e.form).then((function(){e.oldname=e.form.name,Object(u["Message"])({message:"成功修改",type:"success",duration:5e3}),e.$router.push({path:"/dashboard"})}))})).catch((function(e){Object(u["Message"])({message:"Error: "+e,type:"error",duration:5e3})}))},resetInfo:function(){var e=this;Object(i["c"])().then((function(t){e.form=t.data,e.oldname=t.data.name})).catch((function(e){Object(u["Message"])({message:"Error: "+e,type:"error",duration:5e3})}))}},created:function(){var e=this;Object(i["c"])().then((function(t){e.form=t.data,console.log(e.form),e.oldname=t.data.name})).catch((function(e){Object(u["Message"])({message:"Error: "+e,type:"error",duration:5e3})}))}},l=c,m=(r("8a84"),r("2877")),f=Object(m["a"])(l,o,a,!1,null,null,null),d=f.exports,p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.users}},[r("el-table-column",{attrs:{type:"expand","label-width":"auto"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("userform",{attrs:{user:t.row},on:{modifyuser:e.modifyUser,deleteuser:e.deleteUser}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"团体名称",prop:"name"}}),e._v(" "),r("el-table-column",{attrs:{label:"负责人",prop:"manager"}}),e._v(" "),r("el-table-column",{attrs:{label:"联系电话",prop:"phone"}})],1),e._v(" "),r("el-card",[r("p",[r("i",{staticClass:"el-icon-plus"},[e._v(" 添加新用户")])]),e._v(" "),r("userform",{attrs:{user:e.newuser},on:{modifyuser:e.addUser}})],1)],1)},h=[],b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[e.isnew?r("el-form-item",{attrs:{label:"用户昵称",prop:"username"}},[r("el-input",{staticClass:"short",model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"团体名称",prop:"name"}},[r("el-input",{staticClass:"short",model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"负责人名",prop:"manager"}},[r("el-input",{staticClass:"short",model:{value:e.form.manager,callback:function(t){e.$set(e.form,"manager",t)},expression:"form.manager"}})],1),e._v(" "),e.isnew?r("el-form-item",{attrs:{label:"登陆密码",prop:"password"}},[r("el-input",{staticClass:"short",attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"联系方式",prop:"phone"}},[r("el-input",{staticClass:"short",model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"电子邮箱",prop:"email"}},[r("el-input",{staticClass:"short",model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"团体描述",prop:"description"}},[r("el-input",{attrs:{type:"textarea",rows:6},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1),e._v(" "),e.isnew?r("el-button",{attrs:{type:"primary"},on:{click:e.modifyUser}},[r("i",{staticClass:"el-icon-plus"},[e._v(" 新建用户")])]):e._e(),e._v(" "),e.isnew?e._e():r("el-button",{attrs:{type:"primary"},on:{click:e.modifyUser}},[r("i",{staticClass:"el-icon-check"},[e._v(" 确认修改")])]),e._v(" "),e.isnew?e._e():r("el-button",{attrs:{type:"danger",plain:""},on:{click:e.resetForm}},[r("i",{staticClass:"el-icon-close"},[e._v(" 放弃修改")])]),e._v(" "),e.isnew?e._e():r("el-button",{attrs:{type:"danger"},on:{click:e.deleteUser}},[r("i",{staticClass:"el-icon-delete"},[e._v(" 删除账号")])])],1)},g=[],v={name:"userform",props:["user"],data:function(){return{form:{username:void 0,id:void 0,name:void 0,manager:void 0,phone:void 0,email:void 0,description:void 0,password:void 0},rules:{username:{required:!0,message:"登陆名称不能为空",trigger:"blur"},name:{required:!0,message:"团体名称不能为空",trigger:"blur"},manager:{required:!0,message:"负责人不能为空",trigger:"blur"},phone:[{required:!0,message:"电话号码不能为空",trigger:"blur"}],email:{required:!0,message:"电子邮箱不能为空",trigger:"blur"},description:{required:!0,message:"团体描述不能为空",trigger:"blur"},password:{required:!0,message:"密码不能为空",trigger:"blur"}}}},methods:{modifyUser:function(){var e=this;this.$refs.form.validate().then((function(t){t&&e.$emit("modifyuser",e.form)})).catch((function(e){}))},resetForm:function(){this.form.name=this.user.name,this.form.manager=this.user.manager,this.form.phone=this.user.phone,this.form.email=this.user.email,this.form.description=this.user.description,this.form.id=this.user.id,this.isnew=this.user.isnew},deleteUser:function(){this.$emit("deleteuser",this.form.id)}},created:function(){console.log("user is",this.user),this.resetForm()}},_=v,w=(r("555a"),Object(m["a"])(_,b,g,!1,null,null,null)),j=w.exports,y={name:"user",data:function(){return{users:[],newuser:{isnew:!0}}},components:{userform:j},methods:{getIndex:function(e){for(var t in console.log("INDEX! "),this.users)if(this.users[t].id==e)return t;return-1},modifyUser:function(e){var t=this;Object(i["g"])(e,e.id).then((function(r){Object(u["Message"])({message:"成功修改",type:"success",duration:5e3}),console.log(e,s);var s=t.getIndex(e.id);t.users[s].name=e.name,t.users[s].manager=e.manager,t.users[s].phone=e.phone,t.users[s].email=e.email,t.users[s].description=e.description})).catch((function(e){console.log(e)}))},deleteUser:function(e){var t=this,r=this.getIndex(e);console.log(e,r),Object(i["b"])(e).then((function(e){Object(u["Message"])({message:"成功删除",type:"success",duration:5e3}),t.users[r].deleted=!0})).catch((function(e){Object(u["Message"])({message:"error: "+e,type:"error",duration:5e3})}))},addUser:function(e){var t=this;console.log("here"),Object(i["a"])({username:e.username,password:e.password,name:e.name,description:e.description,manager:e.manager,email:e.email,phone:e.phone}).then((function(r){Object(u["Message"])({message:"成功添加",type:"success",duration:5e3}),t.users.push(e)})).catch((function(e){Object(u["Message"])({message:"error: "+e,type:"error",duration:5e3})}))}},created:function(){var e=this;Object(i["d"])().then((function(t){console.log(t),e.users=t.data})).catch((function(e){Object(u["Message"])({message:"Error: "+e,type:"error",duration:5e3})}))}},O=y,k=(r("6ba3"),Object(m["a"])(O,p,h,!1,null,null,null)),x=k.exports,$={name:"info",components:{user:d,superuser:x},data:function(){return{superUser:void 0}},methods:{},created:function(){this.superUser=Object(i["e"])()}},C=$,U=Object(m["a"])(C,s,n,!1,null,null,null);t["default"]=U.exports},f31c:function(e,t,r){}}]);